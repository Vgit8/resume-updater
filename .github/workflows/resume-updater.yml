<<<<<<< HEAD
name: Resume Updater (Simple)

on:
  schedule:
    - cron: '30 2 * * *'   # 08:00 IST
    - cron: '30 9 * * *'   # 15:00 IST
    - cron: '30 14 * * *'  # 20:00 IST
=======
name: Resume Updater (Naukri)

on:
  schedule:
    - cron: '30 2 * * *'
    - cron: '30 9 * * *'
    - cron: '30 14 * * *'
>>>>>>> c8e8d2270090c9b16849c37651222a6fb5cdcda0
  workflow_dispatch:

jobs:
  update-resume:
    runs-on: ubuntu-latest
<<<<<<< HEAD
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Set up Python
=======

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Setup Python
>>>>>>> c8e8d2270090c9b16849c37651222a6fb5cdcda0
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
<<<<<<< HEAD
          pip install -r requirements.txt

      - name: Run updater
        run: python auto_update_resume_simple.py

      - name: Upload updated resume
        uses: actions/upload-artifact@v4
        with:
          name: updated-resume
          path: Viswanatha_Resume_Updated.docx
=======
          pip install selenium python-docx beautifulsoup4 requests

      - name: Install Chrome and Chromedriver
        run: |
          sudo apt update
          sudo apt install -y google-chrome-stable chromium-chromedriver || true
          which chromedriver || true

             - name: Run updater (full diagnostic)
        env:
          NAUKRI_USER: ${{ secrets.NAUKRI_USER }}
          NAUKRI_PASS: ${{ secrets.NAUKRI_PASS }}
          NAUKRI_PROFILE_URL: ${{ secrets.NAUKRI_PROFILE_URL }}
          RESUME_PATH: ${{ github.workspace }}/Viswanatha_Resume_Updated.docx
          BACKUP_DIR: ${{ github.workspace }}/resume_backups
        run: |
          echo "=== ENV ==="
          echo "GITHUB_WORKSPACE=$GITHUB_WORKSPACE"
          echo "PWD=$(pwd)"
          echo "USER=$(whoami)"
          echo
          echo "=== LIST ROOT (one level) ==="
          ls -la "${{ github.workspace }}" || true
          echo
          echo "=== LIST CURRENT DIR (one level) ==="
          ls -la . || true
          echo
          echo "=== RECURSIVE TREE (top 3 levels) ==="
          find "${{ github.workspace }}" -maxdepth 3 -type d -print || true
          echo
          echo "=== ALL PY FILES (show path) ==="
          find "${{ github.workspace }}" -type f -name "*.py" -print || true
          echo
          echo "=== CAT the workflow file to confirm location ==="
          echo "---- start .github/workflows/resume-updater.yml ----"
          sed -n '1,200p' .github/workflows/resume-updater.yml || true
          echo "---- end ----"
          echo
          echo "=== Attempt to run common paths (will not fail the job immediately) ==="
          echo "try python ./auto_update_resume.py"
          python ./auto_update_resume.py || echo "python ./auto_update_resume.py returned $?"
          echo "try python \${GITHUB_WORKSPACE}/auto_update_resume.py"
          python "${{ github.workspace }}/auto_update_resume.py" || echo "python workspace path returned $?"
          echo "try python \${GITHUB_WORKSPACE}/resume-updater/auto_update_resume.py"
          python "${{ github.workspace }}/resume-updater/auto_update_resume.py" || echo "python nested path returned $?"
          echo
          echo "=== Done diagnostic - exit with code 2 if script still missing ==="
          # if script not found, exit non-zero
          if ! find "${{ github.workspace }}" -type f -name "auto_update_resume.py" -print -quit; then
            echo "ERROR: auto_update_resume.py not found in workspace"
            exit 2
          fi
>>>>>>> c8e8d2270090c9b16849c37651222a6fb5cdcda0
